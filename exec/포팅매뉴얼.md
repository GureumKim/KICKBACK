# 포팅매뉴얼

# 1️⃣ 사용도구

---

- 이슈 관리 : Jira
- 형상 관리 : GitLab
- 커뮤니케이션 : Notion, MatterMost
- 디자인 : Figma
- CI/CD : Jenkins
- UCC : Movavi

# 2️⃣ 개발 환경 및 기술 스택

---

## 🎮 CLIENT

---

### Game Client(Unity)

- Unity : 2021.3.33f1
    - MessagePack: 2.5.140

### Web Client

- React: ^18.3.0
- React DOM: ^18.3.0
- React Router: ^6.23.0
- React Router DOM: ^6.23.0

- Zustand: ^4.5.2
- styled-components: ^6.1.8
- React Transition Group: ^4.4.5
- React Awesome Reveal: ^4.2.8

- axios: ^1.6.8
- React Cookie: ^7.1.4
- Firebase: ^10.11.1
- React Icons: ^5.1.0

- TypeScript: ^4.9
- web-vitals: ^2.1.4

- @testing-libarary/jest-dom: ^5.17.0
- @testing-library/react: ^13.4.0
- @testing-library/user-event: ^13.5.0
- @types/jest: ^27.5.2

- temp
    
    ```
    ## 프로젝트 의존성 설정
    
    ### 기술 스택 및 라이브러리 목록
    
    #### 프론트엔드 프레임워크 및 라이브러리
    
    - **React**: ^18.3.0
      - JavaScript 라이브러리로, 사용자 인터페이스를 구축하기 위한 것
    - **React DOM**: ^18.3.0
      - React와 함께 사용되는 DOM 바인딩 라이브러리
    - **React Router**: ^6.23.0
      - React 애플리케이션에서 라우팅을 구현하기 위한 라이브러리
    - **React Router DOM**: ^6.23.0
      - 브라우저 환경에서 React Router를 사용할 수 있게 해주는 라이브러리
    
    #### 상태 관리
    
    - **Zustand**: ^4.5.2
      - React 애플리케이션에서 상태 관리를 간편하게 할 수 있게 해주는 라이브러리
    
    #### 스타일링
    
    - **styled-components**: ^6.1.8
      - CSS-in-JS 라이브러리로, JavaScript 파일 내에서 직접 스타일을 작성할 수 있게 해줌
    
    #### 애니메이션
    
    - **React Transition Group**: ^4.4.5
      - React 애플리케이션에 애니메이션 효과를 추가하기 위한 라이브러리
    - **React Awesome Reveal**: ^4.2.8
      - 스크롤 트리거 애니메이션을 위한 라이브러리
    
    #### HTTP 클라이언트
    
    - **Axios**: ^1.6.8
      - HTTP 요청을 쉽게 할 수 있게 해주는 클라이언트 라이브러리
    
    #### 쿠키 관리
    
    - **React Cookie**: ^7.1.4
      - React 애플리케이션에서 쿠키를 쉽게 관리할 수 있게 해주는 라이브러리
    
    #### Firebase
    
    - **Firebase**: ^10.11.1
      - Google의 Firebase 플랫폼과 통합하기 위한 라이브러리
    
    #### 아이콘
    
    - **React Icons**: ^5.1.0
      - 다양한 아이콘을 React 컴포넌트로 사용할 수 있게 해주는 라이브러리
    
    #### 유틸리티
    
    - **TypeScript**: ^4.9.5
      - JavaScript의 슈퍼셋으로, 정적 타입을 지원하는 언어
    - **web-vitals**: ^2.1.4
      - 웹 성능 측정 및 보고를 위한 라이브러리
    
    #### 테스트
    
    - **@testing-library/jest-dom**: ^5.17.0
      - Jest 테스트에서 DOM 요소의 매처를 제공하는 라이브러리
    - **@testing-library/react**: ^13.4.0
      - React 컴포넌트를 테스트하기 위한 라이브러리
    - **@testing-library/user-event**: ^13.5.0
      - 사용자 이벤트를 시뮬레이션하는 테스트 라이브러리
    - **@types/jest**: ^27.5.2
      - Jest를 TypeScript와 함께 사용하기 위한 타입 정의
    - **@types/node**: ^16.18.96
      - Node.js를 TypeScript와 함께 사용하기 위한 타입 정의
    - **@types/react**: ^18.3.0
      - React를 TypeScript와 함께 사용하기 위한 타입 정의
    - **@types/react-dom**: ^18.3.0
      - React DOM을 TypeScript와 함께 사용하기 위한 타입 정의
    
    #### 개발 스크립트
    
    - **react-scripts**: 5.0.1
      - Create React App에서 사용하는 스크립트와 설정
    
    #### 빌드 및 개발 도구
    
    - **start**: `react-scripts start`
      - 개발 모드에서 애플리케이션을 실행
    - **build**: `react-scripts build`
      - 프로덕션 모드에서 애플리케이션을 빌드
    - **test**: `react-scripts test`
      - 테스트 러너를 실행
    - **eject**: `react-scripts eject`
      - Create React App의 설정을 커스터마이징하기 위해 숨겨진 설정을 노출
    
    #### ESLint 구성
    
    - **eslintConfig**: {
      - **extends**: [
        - "react-app"
        - "react-app/jest"
      ]
    }
    
    #### 브라우저 호환성 설정
    
    - **browserslist**: {
      - **production**: [
        - ">0.2%"
        - "not dead"
        - "not op_mini all"
      ]
      - **development**: [
        - "last 1 chrome version"
        - "last 1 firefox version"
        - "last 1 safari version"
      ]
    }
    
    ```
    

## 📲 SERVER

---

### Infra

- AWS EC2: Ubuntu 20.04.6 LTS
- Nginx
- CertBot
- Jenkins 2.444
- MySQL
- MongoDB
- Vault: 1.13.3
- Redis

### Cloud

- Firebase

### (Game) Live Server (C++)

- C++: 17
- CMake: 3.11
- Boost Libraries: 1.84.0
- MessagePack: 6.1.1
- Devtools

### (Game) Chatting Server (C++)

- C++: 17
- MessagePack: 6.1.1

### (Game) Business Server (Java, Spring Boot)

- Java: 17 (17.0.10 2024-01-16 LTS)
- Gradle: 8.7
- Spring boot: 3.2.4
    - Lombok
    - Devtools
    - MessagePack: msgpack-core:0.9.4
    - Spring WebFlux
    - MongoDB Reactive
- 잠시
    
    ```
    dependencies {
        // Spring Boot MongoDB Reactive 지원
        implementation 'org.springframework.boot:spring-boot-starter-data-mongodb-reactive'
    
        // Spring WebFlux 지원
        implementation 'org.springframework.boot:spring-boot-starter-webflux'
    
        // Lombok 지원 (컴파일 시)
        compileOnly 'org.projectlombok:lombok'
        annotationProcessor 'org.projectlombok:lombok'
    
        // 개발 환경에서만 사용되는 Spring Boot DevTools
        developmentOnly 'org.springframework.boot:spring-boot-devtools'
    
        // 테스트를 위한 Spring Boot Starter Test
        testImplementation 'org.springframework.boot:spring-boot-starter-test'
    
        // Reactor 테스트를 위한 Reactor Test
        testImplementation 'io.projectreactor:reactor-test'
    
        // MessagePack 지원
        implementation 'org.msgpack:msgpack-core:0.9.4'
    }
    
    ```
    

### Web(Auth) Server (Java, Spring Boot)

- Java: 17 (17.0.10 2024-01-16 LTS)
- Gradle: 8.7
- Spring boot: 3.2.4
    - springdoc-openapi-starter-webmvc-ui 2.2.0
    - lombok
    - JWT
        - jjwt-api 0.12.2
        - jjwt-impl 0.12.2
        - jjwt-jackson 0.12.2
    - Redis
    - Firebase 9.2.0
    - Jasypt 3.0.5
    - JPA
    - Spring security 6.3
    - Validation
    - Vault 3.1.1
    - Spring Boot Starter Web
    - Spring Boot Devtools
    - MySQL
    - Spring Boot Starter Test
    - temp
        
        ```
        dependencies {
            // OpenAPI (Swagger 3.0) 지원
            implementation 'org.springdoc:springdoc-openapi-starter-webmvc-ui:2.2.0'
        
            // JWT 지원
            implementation 'io.jsonwebtoken:jjwt-api:0.12.2'
            implementation 'io.jsonwebtoken:jjwt-impl:0.12.2'
            implementation 'io.jsonwebtoken:jjwt-jackson:0.12.2'
        
            // Redis 지원
            implementation 'org.springframework.boot:spring-boot-starter-data-redis'
        
            // Firebase 지원
            implementation 'com.google.firebase:firebase-admin:9.2.0'
        
            // Jasypt (Java Simplified Encryption) 지원
            implementation 'com.github.ulisesbocchio:jasypt-spring-boot-starter:3.0.5'
        
            // JPA 지원
            implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
        
            // Spring Security 지원
            implementation 'org.springframework.boot:spring-boot-starter-security'
        
            // Validation 지원
            implementation 'org.springframework.boot:spring-boot-starter-validation'
        
            // Vault 지원
            implementation group: 'org.springframework.vault', name: 'spring-vault-core', version: '3.1.1'
        
            // Spring Web 지원
            implementation 'org.springframework.boot:spring-boot-starter-web'
        
            // Lombok 지원 (컴파일 시)
            compileOnly 'org.projectlombok:lombok'
            annotationProcessor 'org.projectlombok:lombok'
        
            // 개발 환경에서만 사용되는 Spring Boot DevTools
            developmentOnly 'org.springframework.boot:spring-boot-devtools'
        
            // MySQL 커넥터
            runtimeOnly 'com.mysql:mysql-connector-j'
        
            // 테스트를 위한 Spring Boot Starter Test
            testImplementation 'org.springframework.boot:spring-boot-starter-test'
        
            // Reactor 테스트를 위한 Reactor Test
            testImplementation 'io.projectreactor:reactor-test'
        
            // Spring Security 테스트 지원
            testImplementation 'org.springframework.security:spring-security-test'
        
        }
        
        ```
        

## 🎨 IDE

---

- CLion: 2023.3.4
- IntelliJ Ultimate 2023.3.4
- VsCode: 1.86

# 3️⃣ 설정 파일 및 환경 변수 정보

---

### Business Server

- application.yml
    
    ```yaml
    spring:
      data:
        mongodb:
          uri: mongodb://localhost:27017/mymongo
    ```
    

### Web(Auth) Server

- application-prod.yml (배포 버전)
    
    ```yaml
    server:
      base-url: k10c209.p.ssafy.io
    
    spring:
      servlet:
        # file 업로드 관련
        multipart:
          max-file-size: 10MB
          max-request-size: 10MB
    
      jpa:
        open-in-view: false
        defer-datasource-initialization: true
        generate-ddl: true
        hibernate:
          ddl-auto: update
        properties:
          hibernate:
            format_sql: true
            use_sql_comments: true
            show_sql: true
            jdbc:
              batch_size: 100
            default_batch_fetch_size: 100
    
      datasource:
        driver-class-name: com.mysql.cj.jdbc.Driver
        url: ENC(fkaP7rwbcFvYwi4hnDA0Ym9n3UmIZ8ulrF0VdnEtXthKqAJ0iPckEfmNAbcBTwGzscSG+C/HbkizZdSp1F1Zim5pvmIu//kHJPA9Sy8Ev6Pkz4KF0JLgZrT14q5jzvk0+51OGNLXSdV86Ws+uakFB4D/FO/fbNK0TeolpXh1LmW8ZVf41Bo5SxlGCefC/13ATuAV7X0puARK56Qp2ZBTZ43nt2OhZk6UAdkdwjDWaiq0UtvskUrnjA==)
        username: ENC(bFqHGm/69wBjk8uekBbBoYgj5V+LS1M2)
        password: ENC(65rsvTX/douB3WmrV4Hh0OblqyK9c+FF)
    
      # NoSQL 설정
      data:
        # Redis settings
        redis:
          host: ENC(Zp/KVZSQPCR5u2lMfpvwUQKNwkTSUMMISFuav8P6u8U=)
          port: ENC(RsQtRjtDoiu6pGZ6OvLC5g==)
          
    # jwt 토큰 설정
    jwt:
      accessKey: ENC(s0vsxAuXmlzr6DjkUVLrlIS+MdTML5arOQyKWar2qbFPkVVJ1zZoR09t83GnhFYhzIvLDaD119HeajudDJS4GXxVTkd+M/zQ/q1ssX4aw00y+52LOysZk/q/I3T4a3zYmOxfYI4aCslih6D5TTl5rQnPeZV2rmjdJXAg1X7owfGsquBPnuUptjuKxteIdEjtFFp1SF9QZ/+TvWyYrlwH1Q==)
      refreshKey: ENC(gE+DTAeZ7HD32Rd6u5HcfJu+bg4kgdULucqZWVJCbHG5q5SE53YWhNuQcSyE61MVF8Cow5idsgt1RoMi3w0ri7Bq57Fr6+m6qr5bi+kXL+nQOv/GWoPcj2DxteTB5izXHEp5fzC5uq1m8QrltRiQa1WfY8s1w6myZFWqPzn4S8FjoR/7/4oG7XU/Q/+HV1I0viF/51ziOKJFVn0nPAyMnQ==)
      accessExpiration: PT420M
      refreshExpiration: PT10080M
    
    # vault 설정
    vault:
      uri: http://localhost:8200
      token: myroot
      keyPath: secret/kickback
    
    # log 관리
    logging:
      level:
        org.hibernate:
          type.descriptor.sql: trace
          org.hibernate.SQLQuery: debug
    
    # 기타
    app:
      # firebase
      firebase-configuration-file: ENC(WBdcWWmK6e+jZNEI86zoqJXKVgXcLGUTqEVzaoxgSyc=)
      firebase-bucket: ENC(BZQQDBkTmfMuGavmX4Dt8TMB9Dt6bCb4NpLprjOr1FvCeMcSuJjqJA==)
    ```
    

# 4️⃣ 빌드 및 배포

---

nginx 설정

# 5️⃣ DB dump

---
